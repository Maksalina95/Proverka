<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>–ú–∞–∫—Å–ú–∞—Ä–∫–µ—Ç</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" href="style.css">
  <style>
    .search-bar {
      position: relative;
      max-width: 600px;
      margin: 20px auto;
      background: #fff5fa;
      padding: 16px;
      border-radius: 12px;
      box-shadow: 0 0 8px #f0c1d8;
    }

    .search-bar input#searchInput {
      width: 100%;
      padding: 12px 40px 12px 16px;
      border-radius: 8px;
      border: 1px solid #ccc;
      font-size: 16px;
      outline: none;
    }

    .search-bar input:focus {
      outline: 2px solid #E0218A;
    }

    .search-bar button#clearSearch,
    .search-bar button#searchButton {
      position: absolute;
      top: 50%;
      transform: translateY(-50%);
      background: none;
      border: none;
      font-size: 18px;
      cursor: pointer;
      color: #666;
    }

    .search-bar button#clearSearch {
      right: 40px;
      display: none;
    }

    .search-bar button#searchButton {
      right: 10px;
    }

    .suggestions {
      list-style: none;
      margin: 8px 0 0 0;
      padding: 0;
      background: white;
      border: 1px solid #ccc;
      border-top: none;
      border-radius: 0 0 8px 8px;
      max-height: 150px;
      overflow-y: auto;
      display: none;
      position: absolute;
      width: calc(100% - 32px);
      left: 16px;
      z-index: 10;
    }

    .suggestions li {
      padding: 10px;
      cursor: pointer;
    }

    .suggestions li:hover {
      background-color: #f9e0ec;
    }
  </style>
</head>
<body>

  <!-- –û–±—â–∏–π –∑–∞–≥–æ–ª–æ–≤–æ–∫ -->
  <header>
    <h1>–ú–∞–∫—Å–ú–∞—Ä–∫–µ—Ç</h1>
  </header>

  <!-- üîç –ü–æ–∏—Å–∫–æ–≤–∞—è —Å—Ç—Ä–æ–∫–∞ -->
  <div class="search-bar">
    <input type="text" id="searchInput" placeholder="–ü–æ–∏—Å–∫ —Ç–æ–≤–∞—Ä–æ–≤..." />
    <button id="clearSearch">‚úï</button>
    <button id="searchButton">üîç</button>
    <ul id="suggestionsList" class="suggestions"></ul>
  </div>

  <!-- –ö–æ–Ω—Ç–µ–Ω—Ç, –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç –º–µ–Ω—è—Ç—å—Å—è -->
  <div id="content"></div>

  <!-- –ù–∞–≤–∏–≥–∞—Ü–∏—è -->
  <nav>
    <a href="#" data-page="home" class="active">–ì–ª–∞–≤–Ω–∞—è</a>
    <a href="#" data-page="catalog">–ö–∞—Ç–∞–ª–æ–≥</a>
  </nav>

  <!-- –û—Å–Ω–æ–≤–Ω–æ–π —Å–∫—Ä–∏–ø—Ç SPA -->
  <script type="module" src="scripts/app.js"></script>

  <!-- üîß –°–∫—Ä–∏–ø—Ç –ø–æ–∏—Å–∫–∞ —Å –∞–≤—Ç–æ–ø–æ–¥—Å–∫–∞–∑–∫–∞–º–∏ -->
  <script type="module">
    import { products } from './scripts/app.js';

    const searchInput = document.getElementById('searchInput');
    const clearSearch = document.getElementById('clearSearch');
    const searchButton = document.getElementById('searchButton');
    const suggestionsList = document.getElementById('suggestionsList');

    let productNames = [];

    window.addEventListener('DOMContentLoaded', () => {
      if (Array.isArray(products)) {
        productNames = products.map(p => p.name || p.–Ω–∞–∑–≤–∞–Ω–∏–µ || "").filter(Boolean);
      }

      searchInput.addEventListener('input', () => {
        const query = searchInput.value.trim().toLowerCase();
        clearSearch.style.display = query ? 'block' : 'none';

        const filtered = productNames.filter(name =>
          name.toLowerCase().includes(query)
        );

        suggestionsList.innerHTML = '';
        if (query && filtered.length) {
          filtered.forEach(item => {
            const li = document.createElement('li');
            li.textContent = item;
            li.onclick = () => {
              searchInput.value = item;
              suggestionsList.style.display = 'none';
              clearSearch.style.display = 'block';
              // üëá –í—Å—Ç–∞–≤—å –∑–¥–µ—Å—å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—é —Ç–æ–≤–∞—Ä–æ–≤, –µ—Å–ª–∏ —Ö–æ—á–µ—à—å:
              // filterProductsByName(item);
            };
            suggestionsList.appendChild(li);
          });
          suggestionsList.style.display = 'block';
        } else {
          suggestionsList.style.display = 'none';
        }
      });

      clearSearch.addEventListener('click', () => {
        searchInput.value = '';
        suggestionsList.innerHTML = '';
        suggestionsList.style.display = 'none';
        clearSearch.style.display = 'none';
        searchInput.focus();
      });

      searchButton.addEventListener('click', () => {
        const query = searchInput.value.trim().toLowerCase();
        // üîç –¢—É—Ç –º–æ–∂–Ω–æ –≤—Å—Ç–∞–≤–∏—Ç—å –ø–æ–∏—Å–∫ –ø–æ —Ç–æ–≤–∞—Ä–∞–º
        alert("–í—ã –∏—â–µ—Ç–µ: " + query);
      });

      document.addEventListener('click', e => {
        if (!e.target.closest('.search-bar')) {
          suggestionsList.style.display = 'none';
        }
      });
    });
  </script>
</body>
</html>
